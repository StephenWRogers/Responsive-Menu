(function($){$.fn.mobileMenu=function(options){var settings={combine:true,groupPageText:'Main',nested:true,prependTo:'body',switchWidth:480,topOptionText:'Select a page'},$menus,menuCount=0,uniqueLinks=[];var goTo=function(url){document.location.href=url;};var menuExists=function(){return menuCreated;};var isList=function($this){var pass=true;$this.each(function(){if(!$(this).is('ul')&&!$(this).is('ol')){pass=false;}});return pass;};var isMobile=function(){return($(window).width()<settings.switchWidth);};var getText=function($item){return $.trim($item.clone().children('ul, ol').remove().end().text());};var isUrlUnique=function(url){return($.inArray(url,uniqueLinks)===-1)?true:false;};var checkForDuplicates=function($menu){$menu.find(' > li').each(function(){var $li=$(this),link=$li.find('a').attr('href'),parentLink=function(){if($li.parent().parent().is('li')){return $li.parent().parent().find('a').attr('href');}else{return null;}};if($li.find(' ul, ol').length){checkForDuplicates($li.find('> ul, > ol'));}
if(!$li.find(' > ul li, > ol li').length){$li.find('ul, ol').remove();}
if(!isUrlUnique(parentLink(),uniqueLinks)&&isUrlUnique(link,uniqueLinks)){$li.appendTo($menu.closest('ul#mmnav').find('li:has(a[href='+parentLink()+']):first ul'));}
else if(isUrlUnique(link)){uniqueLinks.push(link);}
else{$li.remove();}});};var combineLists=function(){var $menu=$('<ul id="mmnav" />');$menus.each(function(){$(this).children().clone().appendTo($menu);});checkForDuplicates($menu);return $menu;};var createOption=function($item,$container,text){if(!text){$('<option value="'+$item.find('a:first').attr('href')+'">'+$.trim(getText($item))+'</option>').appendTo($container);}else{$('<option value="'+$item.find('a:first').attr('href')+'">'+text+'</option>').appendTo($container);}};var createOptionGroup=function($group,$container){var $optgroup=$('<optgroup label="'+$.trim(getText($group))+'" />');createOption($group,$optgroup,settings.groupPageText);$group.children('ul, ol').each(function(){$(this).children('li').each(function(){createOption($(this),$optgroup);});});$optgroup.appendTo($container);};var createSelect=function($menu){menuCreated=true;var $select=$('<select id="mm'+menuCount+'" class="mnav '+options.listID+'" />');menuCount++;if(settings.topOptionText){createOption($('<li>'+settings.topOptionText+'</li>'),$select);}
$menu.children('li').each(function(){var $li=$(this);if($li.children('ul, ol').length&&settings.nested){createOptionGroup($li,$select);}
else{createOption($li,$select);}});$select.change(function(){goTo($(this).val());}).prependTo(settings.prependTo);};var runPlugin=function(){if(isMobile()&&!menuExists()){if(settings.combine){var $menu=combineLists();createSelect($menu);}
else{$menus.each(function(){createSelect($(this));});}}
if(isMobile()&&menuExists()){$('.mnav').show();$menus.hide();}
if(!isMobile()&&menuExists()){$('.mnav').hide();$menus.show();}};var throttle;var menuCreated=false;if(options){$.extend(settings,options);}
if(isList($(this))){$menus=$(this);runPlugin();$(window).resize(function(){if(throttle){window.clearTimeout(throttle);}
throttle=window.setTimeout(function(){runPlugin();},500);});}else{alert('mobileMenu only works with <ul>/<ol>');}};})(jQuery);var is={ie:navigator.appName=='Microsoft Internet Explorer',java:navigator.javaEnabled(),ns:navigator.appName=='Netscape',ua:navigator.userAgent.toLowerCase(),version:parseFloat(navigator.appVersion.substr(21))||parseFloat(navigator.appVersion),win:navigator.platform=='Win32'}
is.mac=is.ua.indexOf('mac')>=0;if(is.ua.indexOf('opera')>=0){is.ie=is.ns=false;is.opera=true;}
if(is.ua.indexOf('gecko')>=0){is.ie=is.ns=false;is.gecko=true;}