(function(a){a.fn.mobileMenu=function(b){var c={combine:true,groupPageText:"Main",nested:true,prependTo:"body",switchWidth:480,topOptionText:"Select a page"},d,e=0,f=[];var g=function(a){document.location.href=a};var h=function(){return t};var i=function(b){var c=true;b.each(function(){if(!a(this).is("ul")&&!a(this).is("ol")){c=false}});return c};var j=function(){return a(window).width()<c.switchWidth};var k=function(b){return a.trim(b.clone().children("ul, ol").remove().end().text())};var l=function(b){return a.inArray(b,f)===-1?true:false};var m=function(b){b.find(" > li").each(function(){var c=a(this),d=c.find("a").attr("href"),e=function(){if(c.parent().parent().is("li")){return c.parent().parent().find("a").attr("href")}else{return null}};if(c.find(" ul, ol").length){m(c.find("> ul, > ol"))}if(!c.find(" > ul li, > ol li").length){c.find("ul, ol").remove()}if(!l(e(),f)&&l(d,f)){c.appendTo(b.closest("ul#mmnav").find("li:has(a[href="+e()+"]):first ul"))}else if(l(d)){f.push(d)}else{c.remove()}})};var n=function(){var b=a('<ul id="mmnav" />');d.each(function(){a(this).children().clone().appendTo(b)});m(b);return b};var o=function(b,c,d){if(!d){a('<option value="'+b.find("a:first").attr("href")+'">'+a.trim(k(b))+"</option>").appendTo(c)}else{a('<option value="'+b.find("a:first").attr("href")+'">'+d+"</option>").appendTo(c)}};var p=function(b,d){var e=a('<optgroup label="'+a.trim(k(b))+'" />');o(b,e,c.groupPageText);b.children("ul, ol").each(function(){a(this).children("li").each(function(){o(a(this),e)})});e.appendTo(d)};var q=function(b){t=true;var d=a('<select id="mm'+e+'" class="mnav" />');e++;if(c.topOptionText){o(a("<li>"+c.topOptionText+"</li>"),d)}b.children("li").each(function(){var b=a(this);if(b.children("ul, ol").length&&c.nested){p(b,d)}else{o(b,d)}});d.change(function(){g(a(this).val())}).prependTo(c.prependTo)};var r=function(){if(j()&&!h()){if(c.combine){var b=n();q(b)}else{d.each(function(){q(a(this))})}}if(j()&&h()){a(".mnav").show();d.hide()}if(!j()&&h()){a(".mnav").hide();d.show()}};var s;var t=false;if(b){a.extend(c,b)}if(i(a(this))){d=a(this);r();a(window).resize(function(){if(s){window.clearTimeout(s)}s=window.setTimeout(function(){r()},500)})}else{alert("mobileMenu only works with <ul>/<ol>")}}})(jQuery)
